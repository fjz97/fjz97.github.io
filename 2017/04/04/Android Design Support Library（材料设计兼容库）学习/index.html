<!DOCTYPE html>
<html lang="zh-CN">

<!-- Head tag -->
<head>

    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <!--Description-->

    

    
        <meta name="description" content="feng&#39;s blog"/>
    

    <!--Author-->
    
        <meta name="author" content="feng"/>
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="Android Design Support Library（材料设计兼容库）学习"/>
    

    <!--Open Graph Description-->
    
        <meta property="og:description" content="feng&#39;s blog"/>
    

    <!--Open Graph Site Name-->
        <meta property="og:site_name" content="冯京哲的狗窝"/>

    <!--Type page-->
    
        <meta property="og:type" content="article"/>
    

    <!--Page Cover-->
    
    
        <meta property="og:image" content="http://www.fengjingzhe.comhttps://res.cloudinary.com/bravey/image/upload/v1582873485/wallroom-2880x1620-bg-3cad5d2.jpg"/>
    

        <meta name="twitter:card" content="summary_large_image"/>

    

    
        <meta name="twitter:image" content="http://www.fengjingzhe.comhttps://res.cloudinary.com/bravey/image/upload/v1582873485/wallroom-2880x1620-bg-3cad5d2.jpg"/>
    

    <!-- Title -->
    
    <title>Android Design Support Library（材料设计兼容库）学习 - 冯京哲的狗窝</title>

    <!-- Bootstrap Core CSS -->
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"/>

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/style.css">


    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
    <link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css"/>
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css"/>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet"/>

    <!-- Google Analytics -->
    


    <!-- favicon -->
    

<meta name="generator" content="Hexo 5.0.0"></head>


<body>

    <!-- Menu -->
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">冯京哲的狗窝</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                
                    <li>
                        <a href="/">
                            
                                Home
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/archives">
                            
                                Archives
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/tags">
                            
                                Tags
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/categories">
                            
                                Categories
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/about">
                            
                                About
                            
                        </a>
                    </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

    <!-- Main Content -->
    <!-- Page Header -->
<!-- Set your background image for this header in your post front-matter: cover -->

<header class="intro-header" style="background-image: url('https://res.cloudinary.com/bravey/image/upload/v1582873485/wallroom-2880x1620-bg-3cad5d2.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>Android Design Support Library（材料设计兼容库）学习</h1>
                    
                    <span class="meta">
                        <!-- Date and Author -->
                        
                        
                            2017-04-04
                        
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Tags and categories -->
           
                <div class="col-lg-4 col-lg-offset-2 col-md-5 col-md-offset-1 post-tags">
                    
                        


<a href="/tags/Android/">#Android</a>


                    
                </div>
                <div class="col-lg-4 col-md-5 post-categories">
                    
                        

<a href="/categories/技术/">技术</a>

                    
                </div>
            

            <!-- Gallery -->
            

            <!-- Post Main Content -->
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <p>android5.0引入了Material Design，后续发布的android design support library直接兼容到了android2.1，现在越来越多的App开始使用它的组件，这将是未来App的主流设计风格。</p>
<p>引入项目</p>
<p><code>compile &#39;com.android.support:design:24.2.0&#39;</code></p>
<a id="more"></a>

<hr>
<h1 id="1-DrawerLayout-amp-NavigationView"><a href="#1-DrawerLayout-amp-NavigationView" class="headerlink" title="1.DrawerLayout&amp;NavigationView"></a>1.DrawerLayout&amp;NavigationView</h1><p>创建布局文件，官方推荐DrawerLayout作为根布局，添加NavigationView。</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;android.support.v4.widget.DrawerLayout
    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
    android:id=&quot;@+id/drawer_layout&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;&gt;

    &lt;android.support.design.widget.NavigationView
        android:id=&quot;@+id/navigation&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;match_parent&quot;
        android:layout_gravity=&quot;start&quot;
        app:headerLayout=&quot;@layout/nav_header&quot;
        app:menu=&quot;@menu/layout_navigation_drawer&quot;&gt;
    &lt;/android.support.design.widget.NavigationView&gt;

&lt;/android.support.v4.widget.DrawerLayout&gt;</code></pre>
<p>这里解释一下NavigationView里的几个重要属性。</p>
<p>android:layout_gravity：start/end，其中start表示view在左侧，end表示view在右侧。</p>
<p>app:headerLayout：表示view上部分的layout。</p>
<p>app:menu：表示view的菜单部分。</p>
<p>接下来创建headerLayout和menu布局文件。</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;LinearLayout
    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
    android:layout_width=&quot;320dp&quot;
    android:layout_height=&quot;@dimen/nav_header_height&quot;
    android:background=&quot;?attr/colorPrimary&quot;
    android:paddingBottom=&quot;@dimen/activity_vertical_margin&quot;
    android:paddingLeft=&quot;@dimen/activity_horizontal_margin&quot;
    android:paddingRight=&quot;@dimen/activity_horizontal_margin&quot;
    android:paddingTop=&quot;@dimen/activity_vertical_margin&quot;
    android:theme=&quot;@style/ThemeOverlay.AppCompat.Dark&quot;
    android:orientation=&quot;vertical&quot;
    android:gravity=&quot;bottom&quot;&gt;

&lt;/LinearLayout&gt;</code></pre>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;menu xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;

    &lt;group android:checkableBehavior=&quot;single&quot;&gt;
        &lt;item
            android:id=&quot;@+id/nav_camera&quot;
            android:icon=&quot;@android:drawable/ic_menu_camera&quot;
            android:title=&quot;Import&quot;/&gt;
        &lt;item
            android:id=&quot;@+id/nav_gallery&quot;
            android:icon=&quot;@android:drawable/ic_menu_gallery&quot;
            android:title=&quot;Gallery&quot;/&gt;
        &lt;item
            android:id=&quot;@+id/nav_slideshow&quot;
            android:icon=&quot;@android:drawable/ic_menu_slideshow&quot;
            android:title=&quot;Slideshow&quot;/&gt;
        &lt;item
            android:id=&quot;@+id/nav_manage&quot;
            android:icon=&quot;@android:drawable/ic_menu_manage&quot;
            android:title=&quot;Tools&quot;/&gt;
    &lt;/group&gt;

    &lt;item android:title=&quot;Communicate&quot;&gt;
        &lt;menu&gt;
            &lt;item
                android:id=&quot;@+id/nav_share&quot;
                android:icon=&quot;@android:drawable/ic_menu_share&quot;
                android:title=&quot;Share&quot;/&gt;
            &lt;item
                android:id=&quot;@+id/nav_send&quot;
                android:icon=&quot;@android:drawable/ic_menu_send&quot;
                android:title=&quot;Send&quot;/&gt;
        &lt;/menu&gt;
    &lt;/item&gt;
&lt;/menu&gt;</code></pre>
<p>还差一步，我们需要监听返回键，当drawer被打开的时候可以通过返回键关闭它。</p>
<pre><code>    public void onBackPressed() &amp;#123;
        DrawerLayout drawer = (DrawerLayout) findViewById(R.id.drawer_layout);
        if (drawer.isDrawerOpen(GravityCompat.START)) &amp;#123;
            drawer.closeDrawer(GravityCompat.START);
        &amp;#125; else &amp;#123;
            super.onBackPressed();
        &amp;#125;
    &amp;#125;</code></pre>
<p>这样以后基本的效果就完成了。</p>
<p><img src="/images/21/navigation.png" alt="navigation"></p>
<p>接下来看下如何设置NavigationView选项按钮的回调。这里的回调和之前我们学习的Toolbar上的menu回调很相似。既可以通过给NavigationView调用setNavigationItemSelectedListener方法来设置回调，也可以在Activity的onNavigationItemSelected方法里设置回调。具体可以看看对Android Menu的介绍（虽然navigation不属于三种menu）。</p>
<p>这里贴上通过Listener设置回调的代码。</p>
<pre><code>NavigationView navigationView = (NavigationView) findViewById(R.id.navigation);
        navigationView.setNavigationItemSelectedListener(new NavigationView.OnNavigationItemSelectedListener() &amp;#123;
            @Override
            public boolean onNavigationItemSelected(@NonNull MenuItem item) &amp;#123;
                int selected = item.getItemId();
                if (selected == R.id.nav_share) &amp;#123;
                    Toast.makeText(MainActivity.this, &quot;share clicked&quot;, Toast.LENGTH_SHORT).show();
                &amp;#125;
                return true;//返回true表示处理了事件
            &amp;#125;
        &amp;#125;);</code></pre>
<p><img src="/images/21/navigation_click.png" alt="navigation_click"></p>
<h1 id="2-DrawerLayout与Toolbar结合以及交互"><a href="#2-DrawerLayout与Toolbar结合以及交互" class="headerlink" title="2.DrawerLayout与Toolbar结合以及交互"></a>2.DrawerLayout与Toolbar结合以及交互</h1><p>首先要说的是，官方推荐让DrawerLayout作为根布局，NavigationView作为它的最后一个直接子view，如果不这么做，可能会有各种小bug，我已经体验过了。但是如果直接把Toolbar作为DrawerLayout的直接子view，Toolbar会占满整个屏幕。</p>
<p>我们注意到官方文档里有这样一句话：</p>
<blockquote>
<p>To use a DrawerLayout, position your primary content view as the first child with width and height of match_parent and no layout_gravity&gt;.</p>
</blockquote>
<p>也就是说，第一个子view会占满屏幕，所以我们应该把一个layout作为第一个子view并把它的layout_height设为match_parent，就像这样：</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;android.support.v4.widget.DrawerLayout
        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
        android:id=&quot;@+id/drawer_layout&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;match_parent&quot;&gt;

    &lt;LinearLayout
            android:layout_width=&quot;match_parent&quot;
            android:layout_height=&quot;match_parent&quot;&gt;

        &lt;android.support.v7.widget.Toolbar
                xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
                android:id=&quot;@+id/toolbar&quot;
                android:layout_width=&quot;match_parent&quot;
                android:layout_height=&quot;wrap_content&quot;
                android:minHeight=&quot;?attr/actionBarSize&quot;
                android:background=&quot;?attr/colorPrimary&quot;&gt;

            &lt;LinearLayout
                    android:layout_width=&quot;wrap_content&quot;
                    android:layout_height=&quot;match_parent&quot;
                    android:orientation=&quot;vertical&quot;&gt;

                &lt;TextView
                        android:layout_width=&quot;wrap_content&quot;
                        android:layout_height=&quot;25dp&quot;
                        android:textSize=&quot;20sp&quot;
                        android:text=&quot;Demo&quot;/&gt;

                &lt;TextView
                        android:layout_marginTop=&quot;3dp&quot;
                        android:layout_width=&quot;wrap_content&quot;
                        android:layout_height=&quot;20dp&quot;
                        android:textSize=&quot;14sp&quot;
                        android:text=&quot;jzfeng&quot;/&gt;

            &lt;/LinearLayout&gt;

        &lt;/android.support.v7.widget.Toolbar&gt;

    &lt;/LinearLayout&gt;

    &lt;android.support.design.widget.NavigationView
            android:id=&quot;@+id/navigation&quot;
            android:layout_width=&quot;wrap_content&quot;
            android:layout_height=&quot;match_parent&quot;
            android:layout_gravity=&quot;start&quot;
            app:headerLayout=&quot;@layout/nav_header&quot;
            app:menu=&quot;@menu/layout_navigation_drawer&quot;&gt;
    &lt;/android.support.design.widget.NavigationView&gt;

&lt;/android.support.v4.widget.DrawerLayout&gt;</code></pre>
<p>接着进入主题，DrawerLayout和Toolbar的交互。两者可以通过ActionBarDrawerToggle类来实现交互，我们来研究这个类。</p>
<p>ActionBarDrawerToggle本质上是DrawerLayout.DrawerListener接口的实现类，也就是说它是官方给我们提供的一个写好的DrawerListener，我们可以直接拿来用。</p>
<pre><code>        ActionBarDrawerToggle toggle = new ActionBarDrawerToggle(this, drawerLayout, mToolbar, R.string.navigation_drawer_open, R.string.navigation_drawer_close);
        drawerLayout.setDrawerListener(toggle);
        toggle.syncState();</code></pre>
<p>效果如图：</p>
<img src="/images/21/toggle.gif" width="30%" height="30%">

<p>那么我们想让NavigationView出现在Toolbar的下方呢？我思前想后也只能想到把Toolbar和DrawerLayout放在一个LinearLayout里，bug出现了，如图所示，点击空白处NavigationView收不回去。</p>
<img src="/images/21/toggle_below.gif" width="30%" height="30%">

<p>仔细想了好久，恍然大悟，还是把官方的话给忘了，明明就引用在上面。</p>
<p><strong>切记，DrawerLayout的第一个子view一定要给它分配个layout！！！</strong></p>
<p>也就是说，bug不是出在我们没有把DrawerLayout作为根布局，而是出在没给它加一个子layout（另外，这个子layout就算你给它的layout_height设为wrap_content而没给它放任何content，它的高度依然是全屏的）。改正后bug消除了。</p>
<img src="/images/21/toggle_below_success.gif" width="30%" height="30%">

<h1 id="3-TextInputLayout-amp-TextInputTextEdit"><a href="#3-TextInputLayout-amp-TextInputTextEdit" class="headerlink" title="3.TextInputLayout&amp;TextInputTextEdit"></a>3.TextInputLayout&amp;TextInputTextEdit</h1><p>TextInputLayout&amp;TextInputTextEdit对传统的EditText做了进一步的优化改善，赋予了它一些美观以及实用的动效。TextInputEditText继承自EditText，提供了不一样的UI，但是xml属性和方法是完全一致的。TextInputLayout继承自LinearLayout，使用非常简单，我们熟悉一下一些有用的属性和Java方法就可以了。</p>
<p>在布局里加入TextInputLayout&amp;TextInputTextEdit，注意TextInputTextEdit必须存在于TextInputLayout里面，不然不会提供动效。</p>
<pre><code>        &lt;android.support.design.widget.TextInputLayout
            android:layout_width=&quot;match_parent&quot;
            android:layout_height=&quot;wrap_content&quot;
            android:hint=&quot;@string/app_name&quot;&gt;
            &lt;android.support.design.widget.TextInputEditText
                android:layout_width=&quot;match_parent&quot;
                android:layout_height=&quot;wrap_content&quot;/&gt;
        &lt;/android.support.design.widget.TextInputLayout&gt;</code></pre>
<p>以上代码引入了最基本的TextInputLayout样式，注意，hint属性最好写在TextInputLayout中。</p>
<p>下面通过java代码对它进行一些操作。</p>
<h2 id="1-错误提示。"><a href="#1-错误提示。" class="headerlink" title="1.错误提示。"></a>1.错误提示。</h2><p>我们来看一个邮箱检验的例子。</p>
<pre><code>        String regex = &quot;^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$&quot;;
        final Pattern pattern = Pattern.compile(regex);
        final TextInputLayout emailLayout = (TextInputLayout) findViewById(R.id.email_layout);
        TextInputEditText emailText = (TextInputEditText) findViewById(R.id.email_text);
        emailText.addTextChangedListener(new TextWatcher() &amp;#123;
            @Override
            public void beforeTextChanged(CharSequence s, int start, int count, int after) &amp;#123;

            &amp;#125;

            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) &amp;#123;
                Matcher matcher = pattern.matcher(s);
                if(!matcher.matches())&amp;#123;
                    if(!emailLayout.isErrorEnabled())&amp;#123;
                        emailLayout.setErrorEnabled(true);
                    &amp;#125;
                    emailLayout.setError(&quot;邮箱格式不正确&quot;);
                &amp;#125; else &amp;#123;
                    emailLayout.setErrorEnabled(false);
                &amp;#125;
            &amp;#125;

            @Override
            public void afterTextChanged(Editable s) &amp;#123;

            &amp;#125;
        &amp;#125;);</code></pre>
<p>TextInputLayout.setErrorEnabled方法设置是否可以显示错误提示信息，对TextInputEditText设置监听，当内容改变时，如果邮箱不符合格式，那么允许显示错误提示信息并且通过setError方法显示它，反之则禁用错误提示信息。</p>
<img src="/images/21/check_mail.gif" width="30%" height="30%">

<h1 id="4-FloatingActionButton"><a href="#4-FloatingActionButton" class="headerlink" title="4.FloatingActionButton"></a>4.FloatingActionButton</h1><p>接下来来看个很简单的组件，FloatingActionButton，我们关注它的几个属性就好了。</p>
<pre><code>&lt;android.support.design.widget.FloatingActionButton
            android:id=&quot;@+id/fab&quot;
            android:layout_width=&quot;wrap_content&quot;
            android:layout_height=&quot;wrap_content&quot;
            android:layout_gravity=&quot;end|bottom&quot;
            app:backgroundTint=&quot;#ff87ffeb&quot;
            app:rippleColor=&quot;#33728dff&quot;
            app:elevation=&quot;6dp&quot;
            app:pressedTranslationZ=&quot;12dp&quot;
            android:src=&quot;@android:drawable/ic_dialog_info&quot;/&gt;</code></pre>
<p>backgroundTint：背景颜色，默认为Theme中的colorAccent</p>
<p>rippleColor：点击颜色，默认为Theme中的colorControlHighlight</p>
<p>elevation：阴影的大小</p>
<p>pressedTranslationZ：点击时的阴影大小</p>
<h1 id="5-Snackbar"><a href="#5-Snackbar" class="headerlink" title="5.Snackbar"></a>5.Snackbar</h1><p>再来看一个简单的组件——Snackbar，它是一个升级版的Toast，与Toast不同的是，它可以提供一个feedback操作。</p>
<pre><code>        FloatingActionButton fab = (FloatingActionButton) findViewById(R.id.fab);
        fab.setOnClickListener(new View.OnClickListener() &amp;#123;
            @Override
            public void onClick(View v) &amp;#123;
                //make方法第一个参数传的view我们一般就选取它提供的view（这里是fab）
                Snackbar.make(drawerLayout, &quot;fab clicked&quot;, Snackbar.LENGTH_SHORT).setAction(&quot;DONE&quot;, new View.OnClickListener() &amp;#123;
                    @Override
                    public void onClick(View v) &amp;#123;

                    &amp;#125;
                &amp;#125;).show();
            &amp;#125;
        &amp;#125;);</code></pre>
<p>点击DONE或经过一小段时间后消失。</p>
<p>当然我们也可以设定自动消失的时间</p>
<pre><code>Snackbar.make(drawerLayout, &quot;fab clicked&quot;, Snackbar.LENGTH_SHORT).setDuration(5000).show();</code></pre>
<h1 id="6-TabLayout"><a href="#6-TabLayout" class="headerlink" title="6.TabLayout"></a>6.TabLayout</h1><h2 id="1-基本使用"><a href="#1-基本使用" class="headerlink" title="1.基本使用"></a>1.基本使用</h2><p>TabLayout提供了一个可以滑动的选项卡，我们在xml文件中引入它。</p>
<pre><code>        &lt;android.support.design.widget.TabLayout
            android:id=&quot;@+id/tab_layout&quot;
            android:layout_width=&quot;match_parent&quot;
            android:layout_height=&quot;wrap_content&quot;
            app:tabMode=&quot;scrollable&quot;&gt;
        &lt;/android.support.design.widget.TabLayout&gt;</code></pre>
<p>我们一般不会对TabLayout的样式做太多的定制，如果需要，移步：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/2b2bb6be83a8">TabLayout属性详解</a></p>
<p>我们关注TabLayout最关键的属性app:tabMode，它有两个值，分别是scrollable和fixed。如果是scrollable，当屏幕显示不下所有tab的时候，有些tab会被隐藏；如果是fixed，所有tab会全部显示，当有很多个tab的时候，它们会被挤压到很小。</p>
<p>我们可以在xml文件中创建选项卡，但是一般习惯在java代码中创建。</p>
<p><code>tabLayout.addTab(tabLayout.newTab().setText(&quot;tab1&quot;));</code></p>
<p>运行效果如图：</p>
<p><img src="/images/21/tab.png" alt="tab"></p>
<p>我们发现TabLayout宽度并没有占满整个屏幕，这时候必须设置app:tabGravity属性为fill，而该属性只有tabMode为fixed的时候才生效。</p>
<pre><code>        &lt;android.support.design.widget.TabLayout
            android:id=&quot;@+id/tab_layout&quot;
            android:layout_width=&quot;match_parent&quot;
            android:layout_height=&quot;wrap_content&quot;
            app:tabMode=&quot;fixed&quot;
            app:tabGravity=&quot;fill&quot;&gt;
        &lt;/android.support.design.widget.TabLayout&gt;</code></pre>
<p><img src="/images/21/tab_fill.png" alt="tab_fill"></p>
<p>小结：当选项卡较少时，我们使用appMode:fixed配合tabGravity:fill；当选项卡较多时，我们使用appMode:scrollable。</p>
<h2 id="2-TabLayout配合ViewPager使用"><a href="#2-TabLayout配合ViewPager使用" class="headerlink" title="2.TabLayout配合ViewPager使用"></a>2.TabLayout配合ViewPager使用</h2><p>我们一般将TabLayout和ViewPager一起使用，实现像b站、知乎等app的效果。</p>
<p>只需要一行代码就可以实现它们之间的协作了</p>
<p><code>tabLayout.setupWithViewPager(viewPager);</code></p>
<p>本质上其实是调用了</p>
<p><code>viewPager.addOnPageChangeListener(new TabLayout.TabLayoutOnPageChangeListener(tabLayout));</code></p>
<p>还有，必须得实现ViewPager适配器中的getPageTitle方法，不然tab的标题无法正常显示。另外，我们就不需要自己创建tab了，会自动适配生成tab。实例代码如下：</p>
<pre><code>        TabLayout tabLayout = findViewById(R.id.tab_layout);
        tabLayout.addTab(tabLayout.newTab());
        tabLayout.addTab(tabLayout.newTab());
        tabLayout.addTab(tabLayout.newTab());
        final List&lt;String&gt; titles = new ArrayList&lt;&gt;();
        titles.add(&quot;tab1&quot;);
        titles.add(&quot;tab2&quot;);
        titles.add(&quot;tab3&quot;);
        final List&lt;LinearLayout&gt; layouts = new ArrayList&lt;&gt;();
        layouts.add(new LinearLayout(this));
        layouts.add(new LinearLayout(this));
        layouts.add(new LinearLayout(this));
        ViewPager vp = findViewById(R.id.view_pager);
        vp.setAdapter(new PagerAdapter() &amp;#123;
            @Override
            public Object instantiateItem(ViewGroup container, int position) &amp;#123;
                container.addView(layouts.get(position));
                return layouts.get(position);
            &amp;#125;

            @Override
            public void destroyItem(ViewGroup container, int position, Object object) &amp;#123;
                container.removeView(layouts.get(position));
            &amp;#125;

            @Override
            public int getCount() &amp;#123;
                return 3;
            &amp;#125;

            @Override
            public boolean isViewFromObject(View view, Object object) &amp;#123;
                return false;
            &amp;#125;

            @Override
            public CharSequence getPageTitle(int position) &amp;#123;
                return titles.get(position);
            &amp;#125;
        &amp;#125;);
        tabLayout.setupWithViewPager(vp);</code></pre>
<img src="/images/21/tablayout_viewpager.gif" width="30%" height="30%">

<h1 id="7-CoordinatorLayout（协调者布局）"><a href="#7-CoordinatorLayout（协调者布局）" class="headerlink" title="7.CoordinatorLayout（协调者布局）"></a>7.CoordinatorLayout（协调者布局）</h1><p>CoordinatorLayout是一个强化版的FrameLayout，从名字上我们就可以知道它用于处理多个子view的协调互动，注意，子view必须是CoordinatorLayout的直接子view。</p>
<p>我们由几种效果的实现来了解它。</p>
<h2 id="1-和FAB的互动"><a href="#1-和FAB的互动" class="headerlink" title="1.和FAB的互动"></a>1.和FAB的互动</h2><p>这个很简单，直接在CoordinatorLayout里引入FAB就行了。</p>
<h2 id="2-Toolbar的向上滑动隐藏"><a href="#2-Toolbar的向上滑动隐藏" class="headerlink" title="2.Toolbar的向上滑动隐藏"></a>2.Toolbar的向上滑动隐藏</h2><p>将Toolbar用AppBarLayout包裹起来，并给Toolbar加上属性</p>
<p><code>app:layout_scrollFlags=&quot;scroll|enterAlways&quot;</code></p>
<p>然后给要滑动的组件加上属性，这个组件一般是NestedScrollView（我使用ScrollView不奏效）。</p>
<p><code>app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;</code></p>
<img src="/images/21/scroll.gif" width="30%" height="30%">

<h2 id="3-更一般的使用"><a href="#3-更一般的使用" class="headerlink" title="3.更一般的使用"></a>3.更一般的使用</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/huachao1001/article/details/51554608">CoordinatorLayout的使用如此简单</a></p>


                
            </div>

            <!-- Comments -->
            
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    


                </div>
            
        </div>
    </div>
</article>

    <!-- Footer -->
    <hr />

<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    

                    

                    
                        <li>
                            <a href="https://github.com/klugjo/hexo-theme-clean-blog" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    

                    

                    

                    
                </ul>
                <p class="copyright text-muted">&copy; 2020 feng<br></p>
                <p class="copyright text-muted">Original Theme <a target="_blank" href="http://startbootstrap.com/template-overviews/clean-blog/">Clean Blog</a> from <a href="http://startbootstrap.com/" target="_blank">Start Bootstrap</a></p>
                <p class="copyright text-muted">Adapted for <a target="_blank" href="https://hexo.io/">Hexo</a> by <a href="http://www.codeblocq.com/" target="_blank">Jonathan Klughertz</a></p>
            </div>
        </div>
    </div>
</footer>


    <!-- After footer scripts -->
    
<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Bootstrap -->
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Disqus Comments -->



</body>

</html>