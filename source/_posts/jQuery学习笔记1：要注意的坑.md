---
title: jQuery学习笔记1：要注意的坑
date: 2017-02-01 14:41:03
tags:
- jQuery
categories:
- 技术
---
有这么一种情况，在filter方法的:contains过滤器中想要包含字符串变量，那么就需要将该变量用'" +()+ "'包围起来，你要问我为什么，我也不知道。

`$("table tbody tr").filter(":not(:contains('" + (text) + "'))").hide();`

---

**要注意区分子元素过滤选择器和后代选择器。**

`$("ul li:first-child")`

`$("ul :fist-child")`

这两个选择在ul下只有li的情况时选择出来的是一样的，同样是第一个li。

另外一般last-child好像是文本结点。

---

**要充分注意上下文的变换。**

```
$("div").find("p").click(function(){
    $(this).css("color", "red");
})
```

this已经从所有div切换到了div下的所有p。这个很好注意到，一般不会出错，容易出错的是下面的情况：

`$("ul li").filter(":gt(5):lt(8)");`

问：取出来的是ul下的哪几个li？

这很容易被误以为是index大于5小于8的li，而事实上却是index大于5小于13的li。

原因就在于:gt(5)已经对li进行了一次筛选，得到的是新的li的集合，也就是说，上下文发生了变换，对新的元素集:lt(8)，那就是index大于5后的8个元素了，这点务必注意！

---

toggle（切换）方法有两个含义：

1.当没有参数时，表示对元素的可见性进行切换，原本可见的切换成不可见，不可见的切换成可见。

2.当参数为n个函数时，表示对元素连续点击事件进行绑定，第一次点击触发第一个函数，第二次点击触发第二个函数，以此类推，循环执行。

---

trigger（触发）方法则是对事件的主动触发。

首先要知道，

我们在绑定比如点击事件的时候一般会这么写：

```
$("#btn").click(function(){
    //do sth
});
```

而本质是做了:

```
$("btn").bind("click", function(){
    //do
});
```

当然，unbind同理就是解除事件绑定。

知道了这点，我们就可以自定义事件和回调函数，那么问题就是：如何来触发我们的这些自定义事件，这时候就得用trigger方法。

trigger方法原型：trigger(type, [data])，前一个参数是指事件名称，后一个参数指事件的回调函数参数，要注意的是，

事件回调函数默认的第一个参数是event，所以如果回调函数没有参数，那一切安好，如果要给回调函数加上参数，第一个必须是event，

而在trigger方法中传参数的时候，event时不需要我们去传的，我们只要传之后的其他参数就行。

还有一点就是trigger方法的第二个参数是以数组形式传递，不能与传对象搞混。

---

检查jQuery对象是否存在，例如`var $elem = $("#id");`

不能用`if($elem)`来判断，它会一直返回true。

可以用`if($elem.length)`来判断。