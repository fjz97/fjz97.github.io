<!DOCTYPE html>
<html>

<head>
  
  <title>æ ‡ç­¾ï¼šAndroid - å†¯äº¬å“²çš„ç‹—çª</title>
  <meta charset="UTF-8">
  <meta name="description" content="feng&#39;s blog">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  

  <link rel="shortcut icon" href="/favicon.ico" type="image/png" />
  <meta name="description" content="feng&apos;s blog">
<meta property="og:type" content="website">
<meta property="og:title" content="å†¯äº¬å“²çš„ç‹—çª">
<meta property="og:url" content="http://www.fengjingzhe.com/tags/Android/index.html">
<meta property="og:site_name" content="å†¯äº¬å“²çš„ç‹—çª">
<meta property="og:description" content="feng&apos;s blog">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="å†¯äº¬å“²çš„ç‹—çª">
<meta name="twitter:description" content="feng&apos;s blog">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdui@0.4.3/dist/css/mdui.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.15.8/styles/atom-one-dark.css">
   
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  
  <link rel="stylesheet" href="//at.alicdn.com/t/font_1038733_0xvrvpg9c0r.css">
  <link rel="stylesheet" href="/css/style.css?v=1573583251484">
</head>

<body class="mdui-drawer-body-left">
  
  <div id="nexmoe-background">
    <div class="nexmoe-bg" style="background-image: url(/images/bg.jpg)"></div>
    <div class="mdui-appbar mdui-shadow-0">
      <div class="mdui-toolbar">
        <a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">menu</i></a>
        <div class="mdui-toolbar-spacer"></div>
        <!--<a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">search</i></a>-->
        <a href="/" title="feng" class="mdui-btn mdui-btn-icon"><img src="/images/avatar.jpg"></a>
       </div>
    </div>
  </div>
  <div id="nexmoe-header">
      <div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/" title="feng">
            <img src="/images/avatar.jpg" alt="feng">
        </a>
    </div>
    <div class="nexmoe-count">
        <div><span>æ–‡ç« </span>31</div>
        <div><span>æ ‡ç­¾</span>11</div>
        <div><span>åˆ†ç±»</span>3</div>
    </div>
    <ul class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/" title="å›åˆ°é¦–é¡µ">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                å›åˆ°é¦–é¡µ
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/archives" title="æ–‡ç« å½’æ¡£">
            <i class="mdui-list-item-icon nexmoefont icon-container"></i>
            <div class="mdui-list-item-content">
                æ–‡ç« å½’æ¡£
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/about" title="å…³äºåšå®¢">
            <i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
            <div class="mdui-list-item-content">
                å…³äºåšå®¢
            </div>
        </a>
        
    </ul>
    <aside id="nexmoe-sidebar">
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">ç¤¾äº¤æŒ‰é’®</h3>
    <div class="nexmoe-widget nexmoe-social">
        <a class="mdui-ripple" href="https://space.bilibili.com/7822981" target="_blank" mdui-tooltip="{content: 'å“”å“©å“”å“©'}" style="color: rgb(231, 106, 141);background-color: rgba(231, 106, 141, .15);">
            <i class="nexmoefont icon-bilibili"></i>
        </a><a class="mdui-ripple" href="https://github.com/fjz97/" target="_blank" mdui-tooltip="{content: 'GitHub'}" style="color: rgb(25, 23, 23);background-color: rgba(25, 23, 23, .15);">
            <i class="nexmoefont icon-github"></i>
        </a>
    </div>
</div>
  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">æ–‡ç« åˆ†ç±»</h3>
    <div class="nexmoe-widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/æŠ€æœ¯/">æŠ€æœ¯</a><span class="category-list-count">25</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/é…ç½®/">é…ç½®</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/éšç¬”/">éšç¬”</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>


  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">æ ‡ç­¾äº‘</h3>
    <div class="nexmoe-widget tagcloud">
      <a href="/tags/Android/" style="font-size: 10px;">Android</a> <a href="/tags/android/" style="font-size: 20px;">android</a> <a href="/tags/j2ee/" style="font-size: 14px;">j2ee</a> <a href="/tags/jQuery/" style="font-size: 16px;">jQuery</a> <a href="/tags/java/" style="font-size: 18px;">java</a> <a href="/tags/javascript/" style="font-size: 12px;">javascript</a> <a href="/tags/mongodb/" style="font-size: 10px;">mongodb</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/node/" style="font-size: 10px;">node</a> <a href="/tags/tomcat/" style="font-size: 10px;">tomcat</a> <a href="/tags/éšç¬”/" style="font-size: 10px;">éšç¬”</a>
    </div>
  </div>

  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">æ–‡ç« å½’æ¡£</h3>
    <div class="nexmoe-widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">ä¸ƒæœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">äº”æœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">å››æœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">ä¸‰æœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">äº”æœˆ 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">å››æœˆ 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">ä¸‰æœˆ 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">åäºŒæœˆ 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">åä¸€æœˆ 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">äº”æœˆ 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">å››æœˆ 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">ä¸‰æœˆ 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">äºŒæœˆ 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">ä¸€æœˆ 2017</a></li></ul>
    </div>
  </div>


  
</aside>
    <div class="nexmoe-copyright">
        &copy; 2019 feng
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://nexmoe.com/hexo-theme-nexmoe.html" target="_blank">Nexmoe</a>
    </div>
</div><!-- .nexmoe-drawer -->
  </div>
  <div id="nexmoe-content">
    <div class="nexmoe-primary">
        <section class="nexmoe-posts" id="brand-waterfall">
    
    <div class="nexmoe-post">
        <a href="/2019/05/18/MVVMåˆä½“éªŒ/">
            <div class="nexmoe-post-cover mdui-ripple"> 
                
                    <img src="/images/bg.jpg" alt="MVVMåˆä½“éªŒ">
                
                <h1>MVVMåˆä½“éªŒ</h1>
            </div>
        </a>
        <div class="nexmoe-post-meta">
            <a><i class="nexmoefont icon-calendar-fill"></i>2019å¹´05æœˆ18æ—¥</a>
            <a><i class="nexmoefont icon-areachart"></i>1.2k å­—</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>å¤§æ¦‚ 5 åˆ†é’Ÿ</a>
            
                <a class="nexmoefont icon-appstore-fill -link" href="/categories/æŠ€æœ¯/">æŠ€æœ¯</a>
            
            
                <a class="nexmoefont icon-tag-fill -link" href="/tags/Android/">Android</a>
            
        </div>
        <article>
            
            <h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>ç½‘ä¸Šå…³äºMVVMçš„æ–‡ç« å¾ˆå¤šäº†ï¼Œæœ¬æ–‡ç«™åœ¨ä¸€ä¸ªåˆå­¦è€…çš„è§’åº¦ï¼Œä»å®è·µå‡ºå‘ï¼Œè®²ä¸€ä¸‹æˆ‘å¯¹MVVMçš„ç†è§£å’Œä½“éªŒï¼Œå¦‚æœ‰è¯¯ï¼Œå¾…å‹˜éªŒã€‚</p>
<hr>
<h3 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨MVVM"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨MVVM" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨MVVM"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨MVVM</h3><p>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨MVVMï¼Ÿæœ€å…³é”®çš„ï¼Œå°±æ˜¯è§£è€¦ï¼ŒMVVMå°†é¡¹ç›®åˆ†æˆViewã€ViewModelã€Modelä¸‰å±‚ï¼Œå„å±‚å®Œæˆä¸åŒçš„å·¥ä½œï¼Œä½¿é€»è¾‘æ›´åŠ ç‹¬ç«‹æ¸…æ™°ï¼Œå¤§å¤§æ–¹ä¾¿äº†ç»´æŠ¤å’Œæµ‹è¯•ã€‚MVVMä¸MVPæœ‰ä½•ä¸åŒï¼Ÿ<br><img src="http://zjutkz.net/images/%E9%80%89%E6%8B%A9%E6%81%90%E6%83%A7%E7%97%87%E7%9A%84%E7%A6%8F%E9%9F%B3%EF%BC%81%E6%95%99%E4%BD%A0%E8%AE%A4%E6%B8%85MVC-MVP%E5%92%8CMVVM/mvp.png" alt="MVP"><img src="http://zjutkz.net/images/%E9%80%89%E6%8B%A9%E6%81%90%E6%83%A7%E7%97%87%E7%9A%84%E7%A6%8F%E9%9F%B3%EF%BC%81%E6%95%99%E4%BD%A0%E8%AE%A4%E6%B8%85MVC-MVP%E5%92%8CMVVM/mvvm.png" alt="MVVM"><br>çœ‹å›¾ï¼ŒMVPçš„Viewå’ŒPresenteråŒå‘ä¾èµ–ï¼Œè€ŒMVVMçš„Viewå’ŒViewModelæ˜¯å•å‘ä¾èµ–çš„ï¼ŒViewModelæŒæœ‰Viewï¼ŒViewå´ä¸æŒæœ‰ViewModelï¼Œæ›´è¿›ä¸€æ­¥é™ä½äº†è€¦åˆã€‚å¦‚ä½•å®ç°Viewå’ŒViewModelçš„å•å‘ä¾èµ–ï¼Ÿæœ‰ä¸¤ç§æ–¹æ³•ï¼Œä¸€ç§æ˜¯é€šè¿‡Googleå®˜æ–¹çš„DataBindingæœºåˆ¶ï¼Œè¿™æ˜¯ä¸€ç§æ•°æ®é©±åŠ¨çš„æ€æƒ³ï¼Œç±»ä¼¼Vueï¼Œå¦ä¸€ç§æ˜¯ä½¿ç”¨RxJavaï¼Œè¿™æ˜¯ä¸€ç§äº‹ä»¶é©±åŠ¨çš„æ€æƒ³ï¼Œç±»ä¼¼RxBusï¼Œæœ¬æ–‡ä½¿ç”¨RxJavaä½œä¸ºè§£å†³æ–¹æ¡ˆã€‚</p>
<hr>
<h3 id="å¼€å§‹ä¹‹å‰"><a href="#å¼€å§‹ä¹‹å‰" class="headerlink" title="å¼€å§‹ä¹‹å‰"></a>å¼€å§‹ä¹‹å‰</h3><p>åœ¨ç€æ‰‹ä»£ç å‰ï¼Œæˆ‘æœ‰å¿…è¦å…ˆè®²ä¸€ä¸‹RxJavaã€‚è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡ä½¿ç”¨RxJavaï¼Œå…¶å®ç›´åˆ°ç°åœ¨ï¼Œæˆ‘å¯¹äºå®ƒè¿˜æ˜¯ä¸€çŸ¥åŠè§£ï¼Œæˆ‘å¸Œæœ›ç”¨é€šä¿—çš„è¯­è¨€ä»‹ç»ä¸€ä¸‹å®ƒï¼Œå°½ç®¡å¾ˆå¯èƒ½ä¸æ­£ç¡®ã€‚<br>é¦–å…ˆï¼Œè¦çŸ¥é“çš„æ˜¯ï¼ŒRxJavaæœ€æ ¸å¿ƒçš„æ€æƒ³æ˜¯å¼‚æ­¥ï¼Œå®ç°çš„æ–¹å¼æ˜¯è§‚å¯Ÿè€…æ¨¡å¼ï¼ŒObservableç±»å¯¹åº”äº†è¢«è§‚å¯Ÿè€…ï¼ŒObserverç±»å¯¹åº”äº†è§‚å¯Ÿè€…ã€‚å½“è¢«è§‚å¯Ÿè€…å’Œè§‚å¯Ÿè€…è¢«åˆ›å»ºåï¼Œè°ƒç”¨Observable.subscribe(Observer)å³å®Œæˆè®¢é˜…ï¼Œè®¢é˜…å³è§¦å‘ï¼ŒObservableå¼€å§‹æ‰§è¡Œè€—æ—¶æ“ä½œï¼Œå½“æ“ä½œå®Œæˆåï¼Œé€šçŸ¥Observerè¿›è¡Œå›è°ƒã€‚è¿™æ˜¯æœ€åŸºæœ¬çš„å¼‚æ­¥ä½¿ç”¨æ–¹æ³•ï¼Œå³ä½¿ä¸ç”¨RxJavaï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨Message-Handlerå»å®ç°ã€‚ä½†æˆ‘ä¸æƒ³ç”¨è¿™ç§è§’åº¦å»çœ‹å¾…Observableå’ŒObserverï¼Œåœ¨æˆ‘çœ‹æ¥ï¼ŒObservableæ˜¯æ•°æ®æºï¼ŒObserveræ˜¯æ•°æ®æ¶ˆè´¹è€…ã€‚<br>æ¥ä¸‹æ¥ï¼Œè¦è¯´çš„æ˜¯Subjectç±»ï¼ŒSubjectæœ‰ç‚¹ç‰¹æ®Šï¼Œå®ƒæ—¢æ˜¯Observableï¼Œåˆæ˜¯Observerï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒæ—¢å¯ä»¥ç”Ÿäº§æ•°æ®ï¼Œåˆå¯ä»¥æ¶ˆè´¹æ•°æ®ã€‚<br>æœ€åå†ç®€å•æä¸€ä¸‹CompositeDisposableè¿™ä¸ªç±»ï¼ŒObservableåœ¨è°ƒç”¨subscribeæ–¹æ³•åï¼Œä¼šè¿”å›ä¸€ä¸ªDisposableç±»ï¼Œç”¨äºå–æ¶ˆè®¢é˜…ï¼ŒCompositeDisposableé¡¾åæ€ä¹‰å¯ä»¥å¯¹Disposableè¿›è¡Œç»Ÿä¸€ç®¡ç†ï¼Œå½“æƒ³è¦å–æ¶ˆè®¢é˜…çš„æ—¶å€™ï¼Œè°ƒç”¨CompositeDisposable.clear()å°±å¯ä»¥äº†ã€‚<br>ä»¥ä¸Šå°±æ˜¯é¡¹ç›®ä¸­ç”¨åˆ°çš„æ‰€æœ‰RxJavaæä¾›çš„ç±»ã€‚</p>
<hr>
<h3 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h3><p>ç›´æ¥ä¸Šæ‰‹ä»£ç ï¼Œæœ¬æ–‡ä»£ç å®Œå…¨å‚è€ƒäº†<a href="https://github.com/onlynight/V2EX" target="_blank" rel="noopener">è¿™ä¸ªé¡¹ç›®</a>ï¼Œä¸ºäº†ä½¿ä»£ç æ›´åŠ ç®€æ´ï¼Œæˆ‘åªåˆ›å»ºäº†ä¸‰ä¸ªç±»ï¼Œåˆ†åˆ«å¯¹åº”äº†Viewã€ViewModelã€Modelï¼Œå¹¶çœå»äº†ä¸€äº›ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œåœ¨å®é™…çš„å¼€å‘ä¸­ï¼Œéœ€è¦åšä¸€å®šçš„å°è£…ï¼Œå¹¶åšå¥½ç”Ÿå‘½å‘¨æœŸæ§åˆ¶ã€‚</p>
<p>å…ˆçœ‹Modelç±»ï¼ŒModelç±»æ¯”è¾ƒç®€å•ï¼Œä¸»è¦è´Ÿè´£ä»ç½‘ç»œæˆ–æ•°æ®åº“è·å–æ•°æ®ï¼Œè¿™é‡Œæ¨¡æ‹Ÿä¸€ä¸‹ä»ç½‘ç»œè·å–æ•°æ®ï¼Œè¿”å›ä¸€ä¸ªObservableç±»ã€‚</p>
<pre><code>public class Model {
    //æ¨¡æ‹Ÿä»æœåŠ¡å™¨è·å–æ•°æ®
    public Observable&lt;List&lt;String&gt;&gt; getData() {
        return Observable.create((emitter) -&gt; {
            Thread.sleep(2000);
            List&lt;String&gt; list = new ArrayList&lt;&gt;();
            list.add(String.valueOf(System.currentTimeMillis()));
            emitter.onNext(list);
        });
    }
}
</code></pre><p>æ¥ä¸‹æ¥æ˜¯ViewModelç±»ï¼ŒViewModelç±»æŒæœ‰ä¸€ä¸ªSubjectï¼Œä½œä¸ºæ•°æ®æ¶ˆè´¹è€…ï¼Œé€šè¿‡bindDataæ–¹æ³•ï¼Œå°†å…¶ä¸Modelè·å–åˆ°çš„æ•°æ®è¿›è¡Œç»‘å®šã€‚</p>
<pre><code>public class ViewModel {

    private CompositeDisposable compositeDisposable = new CompositeDisposable();

    private Model model = new Model();

    private PublishSubject&lt;List&lt;String&gt;&gt; data = PublishSubject.create();

    private &lt;T&gt; void bindData(Observable&lt;List&lt;T&gt;&gt; observable, PublishSubject&lt;List&lt;T&gt;&gt; subject) {
        compositeDisposable.add(observable.subscribeOn(Schedulers.io())
                .observeOn(AndroidSchedulers.mainThread())
                .subscribe(subject::onNext));
    }

    public void getUpdateData() {
        bindData(model.getData(), data);
    }

    public PublishSubject&lt;List&lt;String&gt;&gt; getData() {
        return data;
    }
}
</code></pre><p>æœ€åæ˜¯Viewï¼ŒViewä¹Ÿæœ‰bindDataæ–¹æ³•ï¼Œå®ƒå°†ViewModelä¸­è·å¾—åˆ°çš„Subjectï¼ˆè¿™é‡Œæˆä¸ºäº†æ•°æ®æºï¼‰ä¸ä¸€ä¸ªæ¶ˆè´¹æ–¹æ³•ç»‘å®šï¼Œè¿™æ ·ï¼Œæ¯å½“æ•°æ®æºå‘ç”Ÿæ”¹å˜äº†åï¼Œæ¶ˆè´¹æ–¹æ³•å°±ä¼šè¢«è°ƒç”¨ã€‚è¿™é‡Œå€¼å¾—ä¸€æçš„æ˜¯ï¼ŒViewå’ŒViewModeléƒ½æœ‰bindDataæ–¹æ³•ï¼Œå®ƒä»¬åœ¨å®ç°ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œå…·ä½“çš„æ•ˆæœå´æœ‰æ‰€ä¸åŒï¼ŒViewçš„bindDataæ–¹æ³•ç¡®å®å¦‚åŒåå­—ä¸€æ ·ï¼Œå°†ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…è¿›è¡Œäº†ç»‘å®šï¼Œä½†æ˜¯ViewModelçš„bindDataåªæ˜¯è®©Subjectè·å–äº†æ•°æ®ï¼Œå¹¶æ²¡æœ‰è¿›è¡Œç»‘å®šï¼Œå› ä¸ºModelæ¯æ¬¡ç”Ÿäº§çš„æ•°æ®æºå¼•ç”¨çš„ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚</p>
<pre><code>public class MainActivity extends AppCompatActivity {

    private ListViewAdapter adapter;

    private CompositeDisposable compositeDisposable = new CompositeDisposable();

    private ViewModel viewModel = new ViewModel();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Button button = findViewById(R.id.button);
        ListView listView = findViewById(R.id.list_view);

        adapter = new ListViewAdapter(this);
        listView.setAdapter(adapter);

        bindData(viewModel.getData(), this::updateData);
        button.setOnClickListener((v) -&gt; {
            viewModel.getUpdateData();
        });
    }

    private &lt;T&gt; void bindData(Subject&lt;T&gt; subject, Consumer&lt;? super T&gt; consumer) {
        compositeDisposable.add(subject.subscribeOn(Schedulers.io())
                .observeOn(AndroidSchedulers.mainThread())
                .subscribe(consumer));
    }

    private void updateData(List&lt;String&gt; data) {
        swipeRefreshLayout.setRefreshing(false);
        adapter.setData(data);
        adapter.notifyDataSetChanged();
    }
}
</code></pre><p>ç»¼ä¸Šï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡è¿™ç§è§‚å¯Ÿè€…æ¨¡å¼å®ç°çš„Viewä¸ViewModelè§£è€¦ï¼Œå®ç°çš„å…³é”®åœ¨äºSubjectï¼Œå®ƒå¯ä»¥åŒæ—¶ä½œä¸ºæ•°æ®çš„ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ï¼Œå®ƒå­˜åœ¨äºViewModelä¸­ï¼Œä¸€æ–¹é¢ä»Modelä¸­è·å–æ•°æ®ï¼Œä¸€æ–¹é¢å½“æ•°æ®å˜åŒ–æ—¶é€šçŸ¥Viewè¿›è¡Œæ“ä½œã€‚<br><a href="https://github.com/fjz97/MVVMDemo" target="_blank" rel="noopener">æºç </a></p>

            
        </article>
    </div>
    
</section>

    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/mdui@0.4.3/dist/js/mdui.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
 
    <script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>


 
    <script src="https://cdn.jsdelivr.net/npm/smoothscroll-for-websites@1.4.9/SmoothScroll.min.js"></script>


<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.15.8/build/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script src="/js/app.js?v=1573583251494"></script>
<script src="https://cdn.jsdelivr.net/npm/lazysizes@5.1.0/lazysizes.min.js"></script>

  





</body>

</html>
šåšå®¢ï¼Œå¯¹ViewHolderçš„ä¼˜åŒ–åŸç†ä»ç„¶ä¸æ˜ç™½ï¼Œä»Šå¤©æ·±å…¥ç ”ç©¶äº†ä¸€ä¸‹ï¼Œæ€»ç®—æ˜¯ç†è§£äº†ã€‚<br>å…ˆè´´ä¸Šé¡¹ç›®é‡Œä½¿ç”¨çš„ä¸€ä¸ªå›¾ç‰‡GridViewçš„Adapterä»£ç ï¼š</p>
<pre><code>public class MyAdapter extends BaseAdapter {

    private LayoutInflater mInflater;
    private Context context;
    private List&lt;String&gt; pictureUrls;

    public MyAdapter(Context context, List&lt;String&gt; pictures) {
        mInflater = LayoutInflater.from(context);
        this.context = context;
        this.pictureUrls = pictures;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder viewHolder = null;
        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.picture_item_layout, parent, false);
            viewHolder = new ViewHolder();
            viewHolder.picture = convertView.findViewById(R.id.picture);
            convertView.setTag(viewHolder);
        } else {
            viewHolder = (ViewHolder) convertView.getTag();
        }
        viewHolder.picture.setImageURI(getItem(position));
        return convertView;
    }

    @Override
    public int getCount() {
        return pictureUrls.size();
    }

    @Override
    public String getItem(int position) {
        return pictureUrls.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    private final class ViewHolder {
        SimpleDraweeView picture;
    }
}
</code></pre><p>å…¶ä»–ä¸‰ä¸ªæ–¹æ³•ä¸ç”¨å¤šè¯´ï¼Œå…³é”®åœ¨äºgetViewæ–¹æ³•ã€‚<br>getViewæ–¹æ³•ç”¨äºè¿”å›itemçš„Viewï¼Œæˆ‘ä»¬çœ‹æ–¹æ³•çš„å‚æ•°convertViewï¼Œé€šè¿‡æŸ¥é˜…åšå®¢ï¼Œæˆ‘çŸ¥é“äº†convertViewæ˜¯androidä¸­Recycleræ„ä»¶ç¼“å­˜çš„Viewï¼Œå½“æœ‰itemç§»å‡ºå±å¹•çš„æ—¶å€™ï¼Œè·å–ä¸‹ä¸€ä¸ªitemæ—¶è°ƒç”¨çš„getViewæ–¹æ³•çš„convertViewå‚æ•°å°±æ˜¯è¢«ç§»é™¤çš„itemçš„Viewï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="/images/5/Recycler.jpg" alt="Recycler"></p>
<p>è‡³æ­¤éƒ½ä¸éš¾ç†è§£ï¼Œè¿™äº›é¢„å¤‡çŸ¥è¯†æˆ‘æ—©å…ˆå°±çŸ¥é“äº†ï¼Œå´ä»ç„¶ä¸æ˜ç™½å¦‚ä½•å®ç°çš„æ€§èƒ½ä¼˜åŒ–ã€‚</p>
<p>è‹¦æ€å†¥æƒ³åï¼Œæç„¶å¤§æ‚Ÿï¼Œæˆ‘ä¸è¿‡æ˜¯è¿›å…¥äº†ä¸€æ¬¡æ€ç»´è¯¯åŒºï¼š<br>ä»æ¥æ²¡è§è¿‡ViewHolderè¿™ç§å¤ç”¨æœºåˆ¶çš„æˆ‘æ„Ÿè§‰å¤ªæ–°é²œäº†ï¼Œè®¤ä¸ºViewHolderæ‰æ˜¯ä¸»è§’ï¼ŒconvertViewä¸è¿‡æ˜¯ä¸ªå‚æ•°ï¼Œå°å°é…è§’è€Œå·²ï¼Œæ®Šä¸çŸ¥androidå¦‚æ­¤å¤§è´¹å‘¨ç« ç¼–å†™çš„æ„ä»¶ï¼Œæ€ä¹ˆå¯èƒ½ä¼šç»™ä¸€ä¸ªç”šè‡³æ²¡æœ‰åŠ å…¥SDKçš„è‡ªå®šä¹‰ç±»æŠ¢å»é£å¤´ï¼å®ç°æ€§èƒ½ä¼˜åŒ–çš„æ°æ°æ˜¯convertViewï¼ŒViewHolderä¸è¿‡æ˜¯ä¸ªæ·»å¤´ã€‚</p>
<p>ä¸è®ºæ˜¯GridViewè¿˜æ˜¯ListViewï¼Œå®ƒä»¬çš„iteméƒ½æ˜¯ä»åŒä¸€ä¸ªlayoutä¸­inflateçš„ï¼Œæ‰€ä»¥è¯´ç™½äº†ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥è¦ç”Ÿæˆçš„Viewï¼Œä»ç»„æˆä¸Šè¯´ï¼Œä¸convertViewæ˜¯ä¸€æ ·çš„ï¼Œå”¯ä¸€ä¸åŒçš„å°±æ˜¯å…¶ä¸­å¡«å……çš„æ•°æ®ï¼Œå¤ç”¨convertViewï¼Œå°±å¯ä»¥çœä¸‹é‡æ–°inflateçš„å¼€é”€ï¼ˆè¿™å¯æ˜¯IOæ“ä½œï¼‰ï¼Œè¾¾åˆ°æå‡æ€§èƒ½çš„æ•ˆæœã€‚</p>
<p>é‚£ä¹ˆViewHolderå‘¢ï¼Ÿå®ƒæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿè¦æƒ³è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå…ˆå›ç­”å¦ä¸€ä¸ªé—®é¢˜ï¼ŒViewHolderä¸­ä¿å­˜çš„æ˜¯ä»€ä¹ˆï¼Ÿä»¥ä¸Šé¢çš„ä»£ç ä¸ºä¾‹ï¼Œæ˜¯SimpleDraweeViewï¼Œä¹Ÿå°±æ˜¯æ–°Viewå’ŒconvertViewå­˜åœ¨å†…å®¹ä¸Šä¸åŒçš„å­æ§ä»¶ï¼Œåœ¨getViewæ–¹æ³•é‡Œæˆ‘ä»¬è‚¯å®šè¦ä¿®æ”¹å®ƒçš„å†…å®¹ï¼Œé‚£å°±è‚¯å®šè¦è·å–åˆ°å®ƒï¼Œä½¿ç”¨ä¼ ç»Ÿçš„findViewByIdä¹Ÿå­˜åœ¨ä¸€å®šçš„æ—¶é—´å¼€é”€ï¼Œå½“è¦ä¿®æ”¹å†…å®¹çš„æ§ä»¶å¢å¤šæ—¶ï¼Œå¼€é”€ä¼šæ›´å¤§ï¼Œæ‰€ä»¥ä½¿ç”¨ViewHolderé€šè¿‡Viewçš„setTagæ–¹æ³•æŠŠæ§ä»¶ä¿å­˜èµ·æ¥ï¼Œéœ€è¦ä¿®æ”¹çš„æ—¶å€™å†å–å‡ºæ¥ï¼Œå¯ä»¥çœä¸‹ä¸€å®šçš„å¼€é”€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™æ˜¯ä¸€ç§ç©ºé—´æ¢æ—¶é—´çš„ç­–ç•¥ã€‚</p>
<p>è‡³æ­¤æˆ‘ä»¬çš„é—®é¢˜è§£å†³äº†ï¼Œä¸å¦¨è·Ÿç€ä¾‹å­çš„ä»£ç èµ°ä¸€éï¼š</p>
<ol>
<li>GridViewåˆå§‹åŒ–ï¼Œåˆ›å»ºitemï¼Œè°ƒç”¨getViewæ–¹æ³•ï¼Œæ­¤æ—¶convertViewä¸ºç©ºï¼Œæˆ‘ä»¬é€šè¿‡LayoutInflaterå¡«å……Viewèµ‹ç»™convertViewï¼Œå¹¶åˆ›å»ºViewHolderç»‘å®šåˆ°Viewä¸Šï¼ˆViewHolderé‡Œé¢æœ‰æˆ‘ä»¬è·å–åˆ°çš„SimpleDraweeViewå­æ§ä»¶ï¼‰ï¼Œæ¥ç€ç»™SimpleDraweeViewè®¾ç½®å›¾ç‰‡çš„URLï¼ˆä¿®æ”¹å­æ§ä»¶å†…å®¹ï¼‰ï¼Œæœ€åè¿”å›convertViewã€‚è¿™ä¸ªé˜¶æ®µä¼šé‡å¤è‹¥å¹²æ¬¡ï¼Œç›´åˆ°å±å¹•æ˜¾ç¤ºæ»¡å›¾ç‰‡ã€‚</li>
<li>ä¸‹æ‹‰å±å¹•ï¼Œè·å–æ–°çš„itemï¼Œæ­¤æ—¶åˆ›å»ºitemï¼Œè°ƒç”¨getViewæ–¹æ³•ï¼ŒconvertViewå°±ä¸ä¸ºç©ºäº†ï¼Œæˆ‘ä»¬ç›´æ¥æ‹¿åˆ°ViewHolderå¹¶ä¿®æ”¹å…¶ä¸­å­æ§ä»¶çš„å†…å®¹ï¼Œæ­¤æ—¶è¿™ä¸ªè¢«å›æ”¶çš„convertViewå°±æ‘‡èº«ä¸€å˜ï¼Œå˜æˆäº†æˆ‘ä»¬æœŸæœ›çš„æ–°Viewäº†ï¼ˆå›¾ç‰‡URLè¢«æ”¹å˜äº†ï¼‰ï¼Œäºæ˜¯æˆ‘ä»¬å°†å®ƒè¿”å›ã€‚</li>
</ol>
<p>æœ€åæ»¡è¶³ä¸€ä¸‹æˆ‘çš„å¥½å¥‡å¿ƒ~å½“GridViewå¤šä¸ªViewè¢«å›æ”¶ï¼Œåˆåˆ›å»ºå¤šä¸ªæ–°Viewçš„æ—¶å€™ï¼ŒconvertViewä¼šæ˜¯æ€ä¹ˆæ ·å¯¹åº”çš„å‘¢ï¼Ÿ<br>æˆ‘ä»¬å¯¹ä¸Šè¿°ä¾‹å­ä»£ç ä¿®æ”¹SimpleDraweeViewå†…å®¹çš„ä¸€è¡Œæ³¨é‡Šæ‰ï¼Œçœ‹çœ‹è¿è¡Œç»“æœ~</p>
<p><img src="/images/5/before.png" alt="before"></p>
<p><img src="/images/5/after.png" alt="after"></p>
<p>å¯ä»¥çœ‹å‡ºæ¥ï¼Œå½“ä¸‹æ‹‰åŠ è½½ç¬¬ä¸€æ’å›¾ç‰‡çš„æ—¶å€™ï¼Œç¬¬ä¸€å¼ å›¾ç‰‡çš„convertViewæ˜¯ä¸‹æ‹‰å‰çš„ç¬¬ä¸€å¼ å›¾ç‰‡ï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸€ä¸ªè¢«å›æ”¶çš„å›¾ç‰‡ï¼Œç¬¬äºŒä¸‰å››å¼ å›¾ç‰‡çš„convertViewå´æ˜¯nullï¼Œæ‰€ä»¥åŠ è½½äº†æ­£ç¡®çš„å›¾ç‰‡ã€‚æ¥ç€ä¸‹æ‹‰åŠ è½½ç¬¬äºŒæ’çš„å›¾ç‰‡ï¼Œç¬¬ä¸€äºŒå¼ å›¾ç‰‡çš„convertViewæ˜¯ä¸‹æ‹‰å‰çš„ç¬¬ä¸‰å››å¼ å›¾ç‰‡ï¼Œä¹Ÿå°±æ˜¯æœ€åå›æ”¶çš„ä¸¤å¼ å›¾ç‰‡ã€‚</p>

            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2017/04/15/ASç¼–å†™è‡ªå·±çš„åº“/">
            <div class="nexmoe-post-cover mdui-ripple"> 
                
                    <img src="/images/bg.jpg" alt="ASç¼–å†™è‡ªå·±çš„åº“">
                
                <h1>ASç¼–å†™è‡ªå·±çš„åº“</h1>
            </div>
        </a>
        <div class="nexmoe-post-meta">
            <a><i class="nexmoefont icon-calendar-fill"></i>2017å¹´04æœˆ15æ—¥</a>
            <a><i class="nexmoefont icon-areachart"></i>662 å­—</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>å¤§æ¦‚ 2 åˆ†é’Ÿ</a>
            
                <a class="nexmoefont icon-appstore-fill -link" href="/categories/é…ç½®/">é…ç½®</a>
            
            
                <a class="nexmoefont icon-tag-fill -link" href="/tags/android/">android</a>
            
        </div>
        <article>
            
            <h2 id="1-ç¼–å†™android-library"><a href="#1-ç¼–å†™android-library" class="headerlink" title="1.ç¼–å†™android library"></a>1.ç¼–å†™android library</h2><p>é™¤äº†æˆ‘ä»¬ç†ŸçŸ¥çš„jaråŒ…å¤–ï¼Œandroidè¿˜æ”¯æŒå¦å¤–ä¸€ç§æ‰“åŒ…â€”â€”aaråŒ…ï¼Œå®ƒä¸jaråŒ…ä¸åŒä¹‹å¤„åœ¨äºå®ƒå¯ä»¥æŠŠèµ„æºæ–‡ä»¶ä¸€èµ·æ‰“åŒ…ï¼Œè€ŒjaråŒ…åªæ‰“åŒ…æºä»£ç ã€‚</p>
<p>1.ç‚¹å‡»file-&gt;new-&gt;new module-&gt;android libraryï¼Œå‘ç°æˆ‘ä»¬çš„é¡¹ç›®ä¸‹å¤šäº†ä¸€ä¸ªæ–‡ä»¶ï¼Œgradleè„šæœ¬ä¹Ÿå¤šäº†ä¸€ä¸ªæ–‡ä»¶ã€‚</p>
<p><img src="/images/23/project.png" alt="project"></p>
<p>å®è´¨ä¸Šæˆ‘ä»¬çš„android libraryæ˜¯ä»¥æ–°çš„moduleçš„å½¢å¼åˆ›å»ºçš„ï¼Œå®ƒä¸åŸæœ¬é¡¹ç›®çš„app moduleæ˜¯ä¸€æ ·çš„ï¼Œå”¯ä¸€ä¸åŒä¹‹å¤„åœ¨äºå®ƒçš„moduleçš„gradleæ–‡ä»¶çš„ç¬¬ä¸€è¡Œæ˜¯</p>
<p><code>apply plugin: &#39;com.android.library&#39;</code></p>
<p>è¿™æ ·ä»¥ååœ¨é¡¹ç›®buildåä¼šåœ¨å®ƒçš„buildæ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆaaræ–‡ä»¶è€Œä¸æ˜¯apkæ–‡ä»¶ã€‚</p>
<p>æ‰“å¼€projectçš„gradleæ–‡ä»¶ï¼Œincludeçš„moduleä»åŸæ¥çš„appå˜æˆäº†appå’Œmylibraryï¼Œè¯´æ˜æˆ‘ä»¬ç¡®å®ç»™é¡¹ç›®å¢åŠ äº†moduleã€‚</p>
<p><code>include &#39;:app&#39;, &#39;:mylibrary&#39;</code></p>
<p>å¦‚æœæˆ‘ä»¬æƒ³åˆ é™¤è¿™ä¸ªåº“ï¼Œç›´æ¥ä»projectçš„gradleæ–‡ä»¶ä¸­åˆ é™¤å®ƒçš„moduleå°±å¯ä»¥äº†ï¼Œå‰©ä¸‹çš„ç§»é™¤å·¥ä½œå…¨ç”±ASè§£å†³ã€‚</p>
<p>2.ç¼–å†™å®Œandroidåº“åï¼Œå›åˆ°app moduleä¸­å´å‘ç°å†™çš„åº“å¹¶ä¸å¯ç”¨ï¼ŒåŸå› æ˜¯app moduleå¹¶æ²¡æœ‰å¼•å…¥åº“moduleã€‚</p>
<p>ç‚¹å‡»file-&gt;project structure-&gt;app-&gt;dependencies-&gt;add-&gt;3.module dependencies-&gt;mylibraryå°±å¯ä»¥æŠŠåº“moduleæ·»åŠ åˆ°app moduleçš„ä¾èµ–ä¸­å»äº†ã€‚</p>
<p>app moduleçš„gradleæ–‡ä»¶ä¸­å¤šäº†è¿™ä¹ˆä¸€è¡Œ</p>
<p><code>compile project(&quot;:mylibrary&quot;)</code></p>
<p>3.å¦‚æœåœ¨åˆ«çš„é¡¹ç›®ä¸­æƒ³è¦ä½¿ç”¨åº“ï¼Œæœ‰ä¸¤ç§åŠæ³•</p>
<p>â‘ å¼•å…¥moduleã€‚å¥½å¤„åœ¨äºå¯ä»¥æ›´æ”¹åº“ä¸­çš„æ–‡ä»¶ï¼Œæ›´åŠ çµæ´»ã€‚ç‚¹å‡»file-&gt;new-&gt;import moduleé€‰æ‹©è¦å¼•å…¥çš„moduleï¼Œé‡å¤2çš„æ“ä½œåœ¨app moduleä¸­å¼•å…¥ä¾èµ–ã€‚</p>
<p>â‘¡å¼•å…¥aaråŒ…ã€‚æˆ‘ä»¬å°†åº“æ‰€åœ¨æ–‡ä»¶å¤¹çš„buildæ–‡ä»¶é‡Œæ‰¾åˆ°aaråŒ…ï¼Œå¤åˆ¶åˆ°è¦ä½¿ç”¨åº“çš„é¡¹ç›®çš„libsæ–‡ä»¶å¤¹ä¸‹ï¼ŒæŒ‰ç…§å…ˆå‰çš„ç»éªŒï¼Œæ¥ä¸‹æ¥åº”è¯¥åœ¨app moduleçš„gradleæ–‡ä»¶ä¸­å¢åŠ aarä¾èµ–ã€‚</p>
<p><code>compile(name:&#39;mylibrary&#39;, ext:&#39;aar&#39;)</code></p>
<p>ä¹‹åçš„æ€è·¯ä¹Ÿå¾ˆæ˜ç¡®ï¼ŒASå¦‚ä½•èƒ½æ‰¾åˆ°mylibraryæ–‡ä»¶å‘¢ï¼Œlibsåªæ˜¯ä¸€ä¸ªæ™®é€šæ–‡ä»¶å¤¹è€Œå·²ï¼Œå¹¶æ²¡æœ‰ç¯å¢ƒå˜é‡å®šä¹‰å®ƒçš„è·¯å¾„ï¼ŒåŠæ³•æ˜¯ç»™app moduleå¢åŠ ä¸€ä¸ªä»“åº“ï¼Œä»“åº“åœ°å€å°±æ˜¯libsæ–‡ä»¶å¤¹ã€‚</p>
<pre><code>repositories {
    flatDir {
        dirs &#39;libs&#39;
    }
}
</code></pre><p>OKï¼Œå¯ä»¥æ„‰å¿«åœ°åœ¨é¡¹ç›®ä¸­ä½¿ç”¨æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„androidåº“å•¦~</p>
<h2 id="2-åˆ›å»ºè‡ªå·±çš„gradleä¾èµ–åŒ…"><a href="#2-åˆ›å»ºè‡ªå·±çš„gradleä¾èµ–åŒ…" class="headerlink" title="2.åˆ›å»ºè‡ªå·±çš„gradleä¾èµ–åŒ…"></a>2.åˆ›å»ºè‡ªå·±çš„gradleä¾èµ–åŒ…</h2><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/tgbus18990140382/article/details/53066865" target="_blank" rel="noopener">Androidåˆ›å»ºè‡ªå·±çš„gradleä¾èµ–åŒ…</a></p>
<p>é¦–å…ˆè¿™é‡Œéœ€è¦ç”¨åˆ°ä¸¤ä¸ªç½‘ç«™ï¼š</p>
<p>1.github</p>
<p>2.jitpack</p>
<p>å…·ä½“æ­¥éª¤</p>
<p>1.åœ¨ASåˆ›å»ºå¥½æˆ‘ä»¬çš„android libraryåï¼Œä½¿ç”¨ASè‡ªå¸¦çš„VCSæ’ä»¶å…³è”åˆ°githubä»“åº“ï¼ˆè‡ªå·±åˆ›å»ºä»“åº“ä¹Ÿæ²¡å…³ç³»ï¼‰ã€‚</p>
<p>2.åœ¨githubä¸­å‘å¸ƒreleaseç‰ˆæœ¬ï¼Œè¿›å…¥jitpackï¼Œç”Ÿæˆä¾èµ–åŒ…ã€‚</p>
<p>3.åœ¨é¡¹ç›®ä¸­åŠ å…¥gradleä¾èµ–ã€‚</p>

            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2017/04/07/RecyclerViewå­¦ä¹ ç¬”è®°/">
            <div class="nexmoe-post-cover mdui-ripple"> 
                
                    <img src="/images/bg.jpg" alt="RecyclerViewå­¦ä¹ ç¬”è®°">
                
                <h1>RecyclerViewå­¦ä¹ ç¬”è®°</h1>
            </div>
        </a>
        <div class="nexmoe-post-meta">
            <a><i class="nexmoefont icon-calendar-fill"></i>2017å¹´04æœˆ07æ—¥</a>
            <a><i class="nexmoefont icon-areachart"></i>1.3k å­—</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>å¤§æ¦‚ 6 åˆ†é’Ÿ</a>
            
                <a class="nexmoefont icon-appstore-fill -link" href="/categories/æŠ€æœ¯/">æŠ€æœ¯</a>
            
            
                <a class="nexmoefont icon-tag-fill -link" href="/tags/android/">android</a>
            
        </div>
        <article>
            
            <p>ä»¥å‰åœ¨åšappæ—¶ï¼Œæˆ‘ä¹ æƒ¯ä½¿ç”¨ListViewã€GridViewç­‰æ§ä»¶æ¥å®ç°åˆ—è¡¨ã€ç½‘æ ¼å±•ç¤ºæ•°æ®çš„æ•ˆæœã€‚ä»Šå¤©ç ”ç©¶bç«™å®¢æˆ·ç«¯æºç çš„æ—¶å€™ï¼Œç¨å¾®äº†è§£äº†ä¸€ä¸‹RecyclerViewæ§ä»¶ï¼Œå®ƒå¯ä»¥ç”¨æ¥æ›¿ä»£ä»¥å¾€çš„ListViewå’ŒGridViewï¼Œå¹¶ä¸”å¯¹ä¸Šæ‹‰åˆ·æ–°å’Œä¸‹æ‹‰åŠ è½½åŠŸèƒ½æœ‰å¾ˆæ–¹ä¾¿çš„å›è°ƒï¼Œæ­¤å¤–æ·»åŠ åˆ é™¤æ“ä½œä¹Ÿæœ‰ç‰¹æ®Šçš„åŠ¨æ•ˆï¼Œè€Œä¸”ç»“åˆå‰é¢æ‰€å­¦çš„Design Libraryï¼ŒCoordinatorLayoutå¯¹å®ƒæœ‰å¾ˆå¥½çš„æ”¯æŒï¼Œçœ‹æ¥å¾ˆå€¼å¾—å­¦ä¹ ä¸€ä¸‹å®ƒã€‚</p>
<p>å­¦ä¹ å‚è€ƒï¼š<a href="https://blog.csdn.net/developer_jiangqq/article/details/49927631" target="_blank" rel="noopener">ã€FastDev4Androidæ¡†æ¶å¼€å‘ã€‘RecyclerViewå®Œå…¨è§£æ,è®©ä½ ä»æ­¤çˆ±ä¸Šå®ƒ(äºŒåå…«)</a></p>
<p><a href="https://blog.csdn.net/developer_jiangqq/article/details/49992269" target="_blank" rel="noopener">ã€FastDev4Androidæ¡†æ¶å¼€å‘ã€‘RecyclerViewå®Œå…¨è§£æä¹‹ä¸‹æ‹‰åˆ·æ–°ä¸ä¸Šæ‹‰åŠ è½½SwipeRefreshLayout(ä¸‰åä¸€)</a></p>
            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2017/04/04/Android Design Support Libraryï¼ˆææ–™è®¾è®¡å…¼å®¹åº“ï¼‰å­¦ä¹ /">
            <div class="nexmoe-post-cover mdui-ripple"> 
                
                    <img src="/images/bg.jpg" alt="Android Design Support Libraryï¼ˆææ–™è®¾è®¡å…¼å®¹åº“ï¼‰å­¦ä¹ ">
                
                <h1>Android Design Support Libraryï¼ˆææ–™è®¾è®¡å…¼å®¹åº“ï¼‰å­¦ä¹ </h1>
            </div>
        </a>
        <div class="nexmoe-post-meta">
            <a><i class="nexmoefont icon-calendar-fill"></i>2017å¹´04æœˆ04æ—¥</a>
            <a><i class="nexmoefont icon-areachart"></i>2.9k å­—</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>å¤§æ¦‚ 14 åˆ†é’Ÿ</a>
            
                <a class="nexmoefont icon-appstore-fill -link" href="/categories/æŠ€æœ¯/">æŠ€æœ¯</a>
            
            
                <a class="nexmoefont icon-tag-fill -link" href="/tags/android/">android</a>
            
        </div>
        <article>
            
            <p>android5.0å¼•å…¥äº†Material Designï¼Œåç»­å‘å¸ƒçš„android design support libraryç›´æ¥å…¼å®¹åˆ°äº†android2.1ï¼Œç°åœ¨è¶Šæ¥è¶Šå¤šçš„Appå¼€å§‹ä½¿ç”¨å®ƒçš„ç»„ä»¶ï¼Œè¿™å°†æ˜¯æœªæ¥Appçš„ä¸»æµè®¾è®¡é£æ ¼ã€‚</p>
<p>å¼•å…¥é¡¹ç›®</p>
<p><code>compile &#39;com.android.support:design:24.2.0&#39;</code></p>
            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2017/03/26/android Toolbarå­¦ä¹ ç¬”è®°/">
            <div class="nexmoe-post-cover mdui-ripple"> 
                
                    <img src="/images/bg.jpg" alt="android Toolbarå­¦ä¹ ç¬”è®°">
                
                <h1>android Toolbarå­¦ä¹ ç¬”è®°</h1>
            </div>
        </a>
        <div class="nexmoe-post-meta">
            <a><i class="nexmoefont icon-calendar-fill"></i>2017å¹´03æœˆ26æ—¥</a>
            <a><i class="nexmoefont icon-areachart"></i>1.6k å­—</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>å¤§æ¦‚ 8 åˆ†é’Ÿ</a>
            
                <a class="nexmoefont icon-appstore-fill -link" href="/categories/æŠ€æœ¯/">æŠ€æœ¯</a>
            
            
                <a class="nexmoefont icon-tag-fill -link" href="/tags/android/">android</a>
            
        </div>
        <article>
            
            <p>å­¦ä¹ Toolbarä¹‹å‰ï¼Œéœ€è¦äº†è§£Toolbarä¸ActionBarä¹‹é—´çš„åŒºåˆ«ã€‚è¿™é‡Œè´´ä¸Šå®˜æ–¹æ–‡æ¡£å¯¹Toolbarçš„è§£é‡Šã€‚</p>
<blockquote>
<p>A Toolbar is a generalization of action bars for use within application layouts. While an action bar is traditionally part of an Activityâ€™s opaque window decor controlled by the framework, a Toolbar may be placed at any arbitrary level of nesting within a view hierarchy. An application may choose to designate a Toolbar as the action bar for an Activity using the setSupportActionBar() method.</p>
</blockquote>
<p>ç®€å•ç¿»è¯‘ä¸€ä¸‹ï¼ŒToolbaræ˜¯ActionBarçš„æ›´ä¸€èˆ¬åŒ–ï¼Œä»–å¯ä»¥å­˜åœ¨äºä¸€ä¸ªviewçš„ä»»ä½•å±‚æ¬¡ï¼Œæˆ‘ä»¬å¯ä»¥ç»™Activityå®šåˆ¶ä¸€ä¸ªToolbarç”¨äºå–ä»£ActionBarã€‚</p>
<p>ç©¶å…¶å†å²åŸå› ï¼ŒAndroid3.0æ¨äº†ActionBarè¿™ä¸ªæ§ä»¶ï¼Œè€Œåˆ°äº†2013å¹´Googleå¼€å§‹å¤§åŠ›åœ°æ¨åŠ¨æ‰€è°“çš„android styleï¼Œæƒ³è¦é€æ¸æ”¹å–„è¿‡å»çº·ä¹±çš„ç•Œé¢è®¾è®¡ï¼Œå¸Œæœ›è®©ç»ˆç«¯ä½¿ç”¨è€…å°½å¯èƒ½åœ¨androidæ‰‹æœºæœ‰ä¸ªä¸€è‡´çš„æ“ä½œä½“éªŒï¼ŒToolbarçš„å‡ºç°æ„å‘³ç€å®˜æ–¹åœ¨æŸäº›ç¨‹åº¦ä¸Šè®¤ä¸ºActionBaré™åˆ¶äº†å¼€å‘ä¸è®¾è®¡çš„å¼¹æ€§ã€‚</p>
<p>ï¼ˆ2018/5/10ä¿®è®¢ï¼šActivityä¸å¸¦ActionBarï¼Œå¯ä»¥ç»™å®ƒæ·»åŠ ActionBarè€Œä¸èƒ½ç»™å®ƒæ·»åŠ Toolbarï¼Œè¿™é‡Œçš„æ·»åŠ æ˜¯æŒ‡ä»£ç ä¸­setSupportActionBarï¼Œè€Œä¸æ˜¯å¸ƒå±€æ–‡ä»¶ä¸­æ·»åŠ ï¼Œå¦‚æœå¼ºè¡Œåœ¨å¸ƒå±€æ–‡ä»¶ä¸­æ·»åŠ ï¼Œmenuä¸ä¼šæ˜¾ç¤ºã€‚AppCompatActivityå¸¦ActionBarï¼Œä¹Ÿå¯ä»¥ç»™å®ƒæ·»åŠ Toolbarï¼Œå¦‚æœAppCompatActivityä¸éšè—ActionBarè€Œæ·»åŠ Toolbarï¼Œä¼šæŠ¥è¿è¡Œæ—¶å¼‚å¸¸ï¼‰<br>ç”±äºActivityæ˜¯è‡ªå¸¦ActionBarçš„ï¼Œæ‰€ä»¥æƒ³è¦ä½¿ç”¨Toolbarï¼Œå…ˆå¾—å°†ActionBaréšè—èµ·æ¥ã€‚æˆ‘ä»¬å¯ä»¥åœ¨style.xmlä¸­æ›´æ”¹Activityçš„Themeï¼ŒåŠ å…¥ä¸‹é¢ä¸¤è¡Œä»£ç ã€‚</p>
<pre><code>        &lt;item name=&quot;windowNoTitle&quot;&gt;true&lt;/item&gt;
        &lt;item name=&quot;windowActionBar&quot;&gt;false&lt;/item&gt;
</code></pre><p>æˆ–è€…æ›´æ–¹ä¾¿çš„ï¼Œæˆ‘ä»¬è®©Themeçš„parentä¸ºTheme.AppCompat.Light.NoActionBar</p>
<p>æ¥ç€åœ¨Activityçš„Layouté‡Œé¢åŠ å…¥æˆ‘ä»¬Toolbarçš„xmlæ–‡ä»¶ã€‚</p>
<pre><code>&lt;android.support.v7.widget.Toolbar xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
         android:id=&quot;@+id/toolbar&quot;
         android:layout_width=&quot;match_parent&quot;
         android:layout_height=&quot;wrap_content&quot;
         &lt;!-- å½“ToolBaræ²¡æœ‰æ·»åŠ ä»»ä½•ä¸œè¥¿æ—¶ç»™å…¶ä¸€ä¸ªæœ€å°é«˜åº¦ --&gt;
         android:minHeight=&quot;?attr/actionBarSize&quot;
         android:background=&quot;?attr/colorPrimary&quot;&gt;

&lt;/android.support.v7.widget.Toolbar&gt;
</code></pre><p>ç°åœ¨æ¥çœ‹çœ‹æ•ˆæœï¼ŒToolbarå·²ç»æˆåŠŸæ˜¾ç¤ºäº†ã€‚</p>
<p><img src="/images/20/toolbar1.png" alt="toolbar"></p>
<p>å¾—åˆ°äº†Toolbarä»¥åï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥ç ”ç©¶å¦‚ä½•ç»™Toolbarè‡ªå®šä¹‰é¢œè‰²å’Œå¢åŠ æ§ä»¶ã€‚</p>
            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2017/03/25/android LayoutInflaterå­¦ä¹ ç¬”è®°/">
            <div class="nexmoe-post-cover mdui-ripple"> 
                
                    <img src="/images/bg.jpg" alt="android LayoutInflaterå­¦ä¹ ç¬”è®°">
                
                <h1>android LayoutInflaterå­¦ä¹ ç¬”è®°</h1>
            </div>
        </a>
        <div class="nexmoe-post-meta">
            <a><i class="nexmoefont icon-calendar-fill"></i>2017å¹´03æœˆ25æ—¥</a>
            <a><i class="nexmoefont icon-areachart"></i>511 å­—</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>å¤§æ¦‚ 2 åˆ†é’Ÿ</a>
            
                <a class="nexmoefont icon-appstore-fill -link" href="/categories/æŠ€æœ¯/">æŠ€æœ¯</a>
            
            
                <a class="nexmoefont icon-tag-fill -link" href="/tags/android/">android</a>
            
        </div>
        <article>
            
            <h2 id="è·å–LayoutInflater"><a href="#è·å–LayoutInflater" class="headerlink" title="è·å–LayoutInflater"></a>è·å–LayoutInflater</h2><p>æœ‰ä¸‰ç§æ–¹æ³•è·å–LayoutInflaterï¼Œåˆ†åˆ«æ˜¯ï¼š</p>
<pre><code>LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
</code></pre><pre><code>LayoutInflater inflater = LayoutInflater.from(context);
</code></pre><pre><code>LayoutInflater inflater = getLayoutInflater();//åœ¨activityä¸­ä½¿ç”¨
</code></pre><p>è€Œåä¸¤ç§æ–¹æ³•å®é™…ä¹Ÿæ˜¯è°ƒç”¨ç¬¬ä¸€ç§æ–¹æ³•ï¼Œå¾—åˆ°çš„æ˜¯LayoutInflaterçš„å®ç°ç±»PhoneLayoutInflaterã€‚</p>
<h2 id="inflateæ–¹æ³•"><a href="#inflateæ–¹æ³•" class="headerlink" title="inflateæ–¹æ³•"></a>inflateæ–¹æ³•</h2><p>åœ¨ç”Ÿæˆviewçš„æ—¶å€™å¸¸å¸¸è¦ä½¿ç”¨inflateæ–¹æ³•ï¼Œåœ¨fragmentçš„onCreateViewæ–¹æ³•ä¸­æˆ‘ä¹ æƒ¯å†™</p>
<p><code>View view = inflater.inflate(R.layout.xxx, container, false);</code></p>
<p>åœ¨listview adapterçš„getViewæ–¹æ³•ä¸­æˆ‘åˆä¹ æƒ¯å†™</p>
<p><code>View view = inflater.inflate(R.layout.xxx, null);</code></p>
<p>è€Œå´å®Œå…¨ä¸æ˜ç™½è¿™ä¸¤ä¸ªé‡è½½ä¹‹é—´çš„åŒºåˆ«ã€‚å®é™…ä¸Šinflateæ–¹æ³•æœ‰å››ä¸ªé‡è½½è€Œå‰ä¸‰ä¸ªæ–¹æ³•æœ¬è´¨ä¹Ÿæ˜¯è°ƒç”¨æœ€åä¸€ä¸ªæ–¹æ³•ã€‚</p>
<p><img src="/images/19/inflate.png" alt="inflate"></p>
<p>é‚£ä¹ˆå›åˆ°ä¸Šé¢çš„ä¸¤ä¸ªä¾‹å­ï¼Œå®ƒä»¬ç©¶ç«Ÿæœ‰ä»€ä¹ˆä¸åŒå‘¢ã€‚é€šè¿‡ä¸‹é¢è¿™ä¸ªä¾‹å­è§£é‡Šä¸€ä¸‹ã€‚</p>
<p>å¸ƒå±€æ–‡ä»¶</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;TextView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    android:text=&quot;hello world&quot;
    android:background=&quot;@android:color/darker_gray&quot;
    android:gravity=&quot;center&quot;/&gt;
</code></pre><pre><code>    &lt;Button
        android:id=&quot;@+id/btn&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:text=&quot;åŠ è½½å¸ƒå±€&quot;/&gt;

    &lt;LinearLayout
        android:id=&quot;@+id/root&quot;
        android:orientation=&quot;vertical&quot;
        android:layout_width=&quot;300dp&quot;
        android:layout_height=&quot;300dp&quot;&gt;
    &lt;/LinearLayout&gt;
</code></pre><p>MainActivity</p>
<pre><code>final LinearLayout root = (LinearLayout) findViewById(R.id.root);
        Button btn = (Button) findViewById(R.id.btn);
        btn.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                LayoutInflater inflater = getLayoutInflater();
                View view = inflater.inflate(R.layout.item, null);
                root.addView(view);
            }
        });
</code></pre><p>æˆ‘ä»¬ç»™ViewGroupä¼ nullï¼Œè¿è¡Œç»“æœå¦‚ä¸‹</p>
<p><img src="/images/19/ViewGroup_null.png" alt="ViewGroup_null"></p>
<p>å‘ç°æˆ‘ä»¬ç»™textviewè®¾å®šçš„match_parentå±æ€§å¹¶æ²¡æœ‰ç”Ÿæ•ˆï¼ˆæ¯•ç«Ÿå®ƒæ²¡æœ‰parentï¼‰ã€‚è¿™å°±æ˜¯ç¬¬äºŒä¸ªå‚æ•°çš„ä½œç”¨æ‰€åœ¨ï¼Œç»™ç”Ÿæˆçš„viewé™å®šä¸€ä¸ªparentï¼Œä¿®æ”¹ä»£ç å¦‚ä¸‹</p>
<p><code>View view = inflater.inflate(R.layout.item, root, true);</code></p>
<p>è¿è¡Œç»“æœåˆ™è®©äººæ»¡æ„</p>
<p><img src="/images/19/ViewGroup_root.png" alt="ViewGroup_root"></p>
<p>å¦å¤–ç¬¬ä¸‰ä¸ªBooleanå‚æ•°çš„ä½œç”¨æ˜¯å†³å®šæ˜¯å¦å°†viewåŠ å…¥parentçš„xmlæ–‡æ¡£ç»“æ„é‡Œå»ï¼Œé»˜è®¤ä¸ºtrueï¼Œå½“ä¸ºfalseæ—¶ï¼Œparentåªä½œä¸ºå‚ç…§å†³å®šviewçš„ä½ç½®å’Œå¤§å°ï¼Œè€Œä¸æŠŠviewåŠ å…¥å®ƒçš„xmlæ–‡æ¡£é‡Œå»ï¼Œå½“ç„¶ï¼Œè¿™æ ·çš„è¯å®ƒä¸å­˜åœ¨ä¸æ–‡æ¡£ç»“æ„ä¸­ï¼Œæ‰€ä»¥ä¹Ÿä¸ä¼šæ˜¾ç¤ºå‡ºæ¥ã€‚</p>

            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2017/02/20/ASä¸­ä½¿ç”¨lambda/">
            <div class="nexmoe-post-cover mdui-ripple"> 
                
                    <img src="/images/bg.jpg" alt="ASä¸­ä½¿ç”¨lambda">
                
                <h1>ASä¸­ä½¿ç”¨lambda</h1>
            </div>
        </a>
        <div class="nexmoe-post-meta">
            <a><i class="nexmoefont icon-calendar-fill"></i>2017å¹´02æœˆ20æ—¥</a>
            <a><i class="nexmoefont icon-areachart"></i>45 å­—</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>å¤§æ¦‚ 1 åˆ†é’Ÿ</a>
            
                <a class="nexmoefont icon-appstore-fill -link" href="/categories/é…ç½®/">é…ç½®</a>
            
            
                <a class="nexmoefont icon-tag-fill -link" href="/tags/android/">android</a>
            
        </div>
        <article>
            
            <p>åœ¨é¡¹ç›®gradleä¸­åŠ å…¥</p>
<p><code>classpath &#39;me.tatarka:gradle-retrolambda:3.2.5&#39;</code></p>
<p>åœ¨appæ¨¡å—gradleä¸­åŠ å…¥</p>
<pre><code>android {
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }
}
</code></pre><p>ä»¥åŠ</p>
<p><code>apply plugin: &#39;me.tatarka.retrolambda&#39;</code></p>
<p>å¼•å…¥æ’ä»¶</p>

            
        </article>
    </div>
    
</section>

    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/mdui@0.4.3/dist/js/mdui.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
 
    <script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>


 
    <script src="https://cdn.jsdelivr.net/npm/smoothscroll-for-websites@1.4.9/SmoothScroll.min.js"></script>


<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.15.8/build/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script src="/js/app.js?v=1573583251439"></script>
<script src="https://cdn.jsdelivr.net/npm/lazysizes@5.1.0/lazysizes.min.js"></script>

  





</body>

</html>
